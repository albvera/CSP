\begin{proof}[Proof of Theorem \ref{thm:markedhubs}]
To get this stronger bound, we need to modify the hub label construction. The algorithm for forward hub construction is given in Algorithm~\ref{alg:forwardhub}, and for reverse hubs in Algorithm~\ref{alg:backwardhub}. Note that the two must be run sequentially, as the latter uses the nodes marked in the former.


We make the forward hubs $\Lf(\pp{v,b})$ slightly bigger by storing, for each node the distance from $\pp{v,b}$ and also the \emph{budget surplus}.
Let $C_i$ be the $(h_c,2^{i-1})$-EPHS and $\PE_{s,t}$ the efficient paths from $s$ to $t$.

Observe that, whenever a node $v\in C_i$ is added, $v\in \Bf_{2^i}(s)$ guarantees that at most $h_c$ such points are needed for the whole process.
Additionally, every such $v$ is added at most $g(b)$ times in the hub of $\pp{s,b}$.
The data requirement guarantee follows.

The bound for data requirements is $g(B) h_c\log D$, the argument is analogous to the forward case.
Finally, we need to prove the cover property.
Take any query $SP(\pp{s,b},t^-)$ and let $P$ be the solution.
In $Lf(\pp{s,b})$ there is a node $v_P$ added by Algorithm~\ref{alg:forwardhub}.
By construction, the same node $v_P$ was added to $\Lb(\pp{d,0})$. The result follows.


\begin{algorithm}[!h]
\caption{Construction of forward hub}
\label{alg:forwardhub}
\begin{algorithmic}[1]
\Require Node $s\in V$, efficient paths $\PE_{s,t}\,\forall\,t$, EPHS $\crl*{C_i}$.
\Ensure Forward hubs $Lf(\pp{s,b})$ for $b=0,\ldots,B$ and a marked node $v_P$ for every path.
\State Order each $\PE_{s,t}$ by increasing cost and remove paths consuming more than $B$.
\For{$t\in V\setminus s$}
	\For{$P\in\calP_{s,t}^E$}
		\State $b\gets c(P)$, $b'\gets c(P')$, where $P'$ is the next path in the list ($b'=B$ if no such path).
		\State Find the largest $i$ such that $P$ is $2^{i-1}$-efficient.
		\State Find $v\in C_i$ hitting $P$ and mark $v$ as $v_P$.
		\State Add $\pp{v,c(P[v,t])}$ to $L(\pp{s,b})^+$  with distance $\ell(P[s,v])$ and surplus zero.
		\For{$x$ between $b$ and $b'$}
			\State Add $\pp{v,c(P[v,t])}$ to $L(\pp{s,x})^+$  with distance $\ell(P[s,v])$ and surplus $x-b$.
		\EndFor
	\EndFor
\EndFor
\end{algorithmic}
\end{algorithm}

\begin{algorithm}[!h]
\caption{Construction of backward hub}
\label{alg:backwardhub}
\begin{algorithmic}[1]
\Require Node $t\in V$, efficient paths $\calP_{s,t}^E\,\forall\,s$, marked nodes and EPHS $C_i$.
\Ensure Backward hub $\Lb(\pp{t,0})$.
\State Order each $\calP_{s,t}^E$ by increasing cost and remove paths consuming more than $B$.
\State $\Lb(\pp{t,0})\gets \varnothing$
\For{$s\in V\setminus t$}
	\For{$P\in\calP_{s,t}^E$}
		\State Find the largest $i$ such that $P$ is $2^{i-1}$-efficient.
		\State Take $v$ as the marked node $v_P$.
		\State Add $\pp{v,c(P[v,t])}$ to $\Lb(\pp{t,0})$ with distance $\ell(P[v,t])$.
	\EndFor
\EndFor
\end{algorithmic}
\end{algorithm}
\end{proof}