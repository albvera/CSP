%!TEX root = main_vldb.tex

We now define the notions of hitting sets for path systems, and the highway dimension (HD), which we use to parametrize the performance of our algorithms. The highway dimension was introduced by Abraham et al.~\cite{highway2010,highway2013} for undirected graphs and the shortest-path set system. Our presentation closely follows these works; however, for our purposes, we need to extend the definitions to directed graphs and general path systems.

\sbnote{Do we need downward closure?}

We define a \emph{path system} $\calQ$ as any collection of paths. Given a set $C\subseteq V$ and a path $Q$, we say that $C$ \emph{hits} $Q$ if some node in $Q$ belongs to $C$. Moreover, we say that $C$ is a \emph{hitting set for a path system} $\calQ$ if it hits every $Q\in\calQ$.


Hitting sets are useful for compressing path systems. In particular, though a hitting set may be large, the extent to which a path system can be compressed depends on the \emph{local sparsity} of a hitting set with respect to \emph{significant paths} of $\calQ$. 
Following \cite{highway2013}, for any $r>0$, we say a path $Q$ is $r$-significant $\ell(Q)>r$. For a given path-system $\calQ$, we denote $\calQ_r$ as the set of all $r$-significant paths in $\calQ$.
\begin{definition}
\label{def:lshs}
\textbf{(Locally-Sparse Hitting Sets)} Given a path system $\calQ$ and $r>0$, an $(h,r)$ locally-sparse hitting set (or $(h,r)$-LSHS) is a set $C\subseteq V$ with two properties: 
\begin{enumerate}[nosep]
\item Hitting: $C$ is a hitting set for $\calQ_r$.
\item Local sparsity: for every $v\in V$, $\card{\Bb_{2r}(v)\cap C}\leq h$ and $\card{\Bf_{2r}(v)\cap C}\leq h$.
\end{enumerate}
\end{definition}
\sbnote{Can we instead say $B_{2r}\leq h$ - that simplifies things.}

The existence of $(h,r)$-SPHS enables the compression of path-system $\calQ$ via the construction of \emph{hub labels} (cf. Section~\ref{ssec:hldef}). Moreover, a natural greedy algorithm gives hitting sets with local-sparsity $h\log n$ in polynomial time. To find hitting sets which are independent of $n$,Abraham et al.~\citep{highway2013} introduced the stronger notion of the \emph{highway dimension}. To define this, we need two additional definitions:
for $v\in V, r>0$, we define the \emph{forward and reverse path neighborhoods} with respect to path-system $\calQ$ as 
\begin{align*}
S_r^+(v,\calQ) &\defeq\{Q\in\calQ_r: \dist(v,Q)\leq 2r \}, \\  
S_r^-(v,\calQ) &\defeq\{Q\in\calQ_r: \dist(Q,v)\leq 2r \}.
\end{align*}
\begin{definition}
\label{def:hddef}
\textbf{(Highway Dimension)}
A path-system $\calQ$ has HD $h$ if, for every $r>0$, and for every $v\in V$, there exist sets $H_{v,r}\subseteq V$ such that $\card{H_{v,r}}\leq h$ and $H_{v,r}$ is a hitting set for $S_r^+(v,\calQ)\cup S_r^-(v,\calQ)$.
\end{definition}
The highway dimension essentially re-orders the sequence of qualifiers in the definition of $(h,r)$-LSHS: it requires the existence of a small hitting set for each individual neighborhood, rather than a single hitting set which is locally sparse. 
The HD permits to construct a $\log h$ approximation of the SPHS in polynomial time.
Additionally, HD is an upper bound to the doubling dimension.


\begin{proposition}
If the path system $\calQ$ has HD $h$, then, for every $r>0$, there exists an $(h,r)$-SPHS.
\end{proposition}
It was first defined in \citet{highway2013} for undirected graphs and the shortest-path system $\calP$; the above is the natural analog for directed graphs and general set systems. As shorthand, we refer to the HD of $(G,\ell)$ as that of the path system $\calP$.

The HD of a graph does not bound the maximum degree $\Delta$.
On the other hand, the HD of the geometric realization does bound $\Delta$.
\anote{This is because we switched to the weaker definition, now paths of single nodes are not significant.}


\subsubsection{Multi-Scale Hitting Sets} \label{sec:multi_scale}
The constructions in the following sections will depend on the existence of SPHS.
Let $D=\max_{P\in\calP}\ell(P)$ be the diameter.
We assume that the network $(G,\ell)$ admits sets $C_i$, $i=1,\ldots,\log D$, such that $C_i$ is an $(h,2^{i-1})$-SPHS.

Computing the desired hitting sets in polynomial time is an interesting problem in its own right.
A greedy algorithm achieves a $\Or(\log n)$ approximation, meaning that the sparsity will be $\Or(h\log n)$ instead of $h$ .
We will also show how to obtain a $\Or(\Delta\log(h\Delta))$ approximation using a more sophisticated tool\todo{insert reference}.
The results will still carry out, but one needs to replace $h$ for this approximation when talking about polynomial time preprocessing.

A more subtle point is that the algorithm for the better approximation, even though runs in polynomial time, is impractical.
On the other hand, the greedy algorithm also poses some restrictions.
It involves an all shortest path computation, so it can be done either with (i) $\Omega(n^2)$ memory and $\Omega(n^3)$ time or (ii) $\Or(n)$ memory and $\Omega(n^3\log n)$ time \todo{double check these times}. 
\anote{More on this?}

Given the previous restrictions, we use instead a heuristic for the approximation.
We compute only $k<<n$ shortest path trees, leading to $\Or(kn)$ memory and $\Or(kn^2)$.
It is an open problem to determine the approximation guarantee of this algorithm.
For more details see \todo{insert reference}.